<!DOCTYPE html>
<html>
  <head>
    <title>EnergyMeter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="data:," />
    <meta charset="UTF-8" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script src="https://code.highcharts.com/highcharts.js"></script>

    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <!-- MDB -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="style.css" />
    <style></style>
    <title>EnergyMeter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="data:," />
    <script src="scripts.js"></script>
  </head>

  <body>
    <div class="topnav">
      <div class="logo">
        <span class="logo-img"> <i class="bi bi-speedometer"></i></span>
        <h1>EnergyMeter</h1>
      </div>
      <nav>
        <ul>
          <li><a href="#">Domů</a></li>
          <li><a href="#">Grafy</a></li>
          <li><a href="#">Nastavení</a></li>
        </ul>
      </nav>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="col">
          <div class="card">
            <div class="heading">L1</div>
            <div class="readings">
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-speedometer"></i>Napětí
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">230</span>V
                </div>
              </div>
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-lightning-fill"></i>Proud
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">10</span>A
                </div>
              </div>
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-activity"></i>Frekvence
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">50</span>Hz
                </div>
              </div>
              <div class="reading">
                <div class="reading-name"><i class="bi bi-plug"></i>Výkon</div>
                <div class="reading-value">
                  <span class="reading-value-content">100</span>W
                </div>
              </div>
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-percent"></i>Účiník
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">0,89</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <div class="heading">L1</div>
            <div class="readings">
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-speedometer"></i>Napětí
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">230</span>V
                </div>
              </div>
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-lightning-fill"></i>Proud
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">10</span>A
                </div>
              </div>
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-activity"></i>Frekvence
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">50</span>Hz
                </div>
              </div>
              <div class="reading">
                <div class="reading-name"><i class="bi bi-plug"></i>Výkon</div>
                <div class="reading-value">
                  <span class="reading-value-content">100</span>W
                </div>
              </div>
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-percent"></i>Účiník
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">0,89</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <div class="heading">L1</div>
            <div class="readings">
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-speedometer"></i>Napětí
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">230</span>V
                </div>
              </div>
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-lightning-fill"></i>Proud
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">10</span>A
                </div>
              </div>
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-activity"></i>Frekvence
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">50</span>Hz
                </div>
              </div>
              <div class="reading">
                <div class="reading-name"><i class="bi bi-plug"></i>Výkon</div>
                <div class="reading-value">
                  <span class="reading-value-content">100</span>W
                </div>
              </div>
              <div class="reading">
                <div class="reading-name">
                  <i class="bi bi-percent"></i>Účiník
                </div>
                <div class="reading-value">
                  <span class="reading-value-content">0,89</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row">
        <div class="col">
          <div class="card">
            <div
              id="chart-phase1"
              class="container"
              style="margin-top: 0px"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      var chartT1;

      function initializeChart() {
        chartT1 = new Highcharts.Chart({
          chart: {
            renderTo: "chart-phase1",
          },
          title: {
            text: "L1",
          },
          series: [
            {
              name: "Napětí",
              showInLegend: false,
              data: [],
              color: "#059e8a",
            },
            {
              name: "Proud",
              showInLegend: false,
              data: [],
              yAxis: 1,
              color: "red",
            },
          ],
          plotOptions: {
            line: {
              animation: false,
              dataLabels: {
                enabled: false,
              },
            },
          },
          xAxis: {
            type: "datetime",
            dateTimeLabelFormats: {
              second: "%H:%M:%S",
            },
          },
          yAxis: [
            {
              title: {
                text: "Napětí L1 (V)",
              },
            },
            {
              title: {
                text: "Proud L1 (A)",
              },
              opposite: true,
            },
          ],
          credits: {
            enabled: false,
          },
          // Add exporting module with a button for changing timespan
        });
      }

      // Your existing code to add data to the chart at 1-second intervals
      setInterval(function () {
        var x = new Date().getTime(),
          y = Math.floor(Math.random() * 100);

        // Add point to series 1
        if (chartT1.series[0].data.length >= 10) {
          chartT1.series[0].addPoint([x, y], true, true);
        } else {
          chartT1.series[0].addPoint([x, y], true, false);
        }

        // Add point to series 2
        if (chartT1.series[1].data.length >= 10) {
          chartT1.series[1].addPoint([x, y + 20], true, true);
        } else {
          chartT1.series[1].addPoint([x, y + 20], true, false);
        }
      }, 1000);

      // Call the initializeChart function to set up the chart
      initializeChart();
    </script>
  </body>
</html>
